import{a as p}from"/build/_shared/chunk-QFJ5IYWW.js";import{a as m}from"/build/_shared/chunk-CQXTAVIO.js";import{c as i}from"/build/_shared/chunk-Q3IECNXJ.js";var n=i(m()),o={meta:{title:"useIsomorphicLayout | React Spring","og:title":"useIsomorphicLayout | React Spring","twitter:title":"useIsomorphicLayout | React Spring",description:"API documentation for the useIsomorphicLayout utility hook in React Spring.","og:description":"API documentation for the useIsomorphicLayout utility hook in React Spring.","twitter:description":"API documentation for the useIsomorphicLayout utility hook in React Spring.","og:url":"https://www.react-spring.dev/docs/utilities/use-isomorphic-layout-effect","twitter:url":"https://www.react-spring.dev/docs/utilities/use-isomorphic-layout-effect"},sidebar_position:1};function c(e={}){let s=Object.assign({h1:"h1",a:"a",h2:"h2",pre:"pre",code:"code",div:"div",span:"span",p:"p"},p(),e.components),{wrapper:a}=s,t=n.default.createElement(n.default.Fragment,null,n.default.createElement(s.h1,{id:"useisomorphiclayouteffect"},n.default.createElement(s.a,{href:"#useisomorphiclayouteffect"},"useIsomorphicLayoutEffect")),`
`,n.default.createElement(s.h2,{id:"usage"},n.default.createElement(s.a,{href:"#usage"},"Usage")),`
`,n.default.createElement(s.pre,{lines:"1,9-20"},n.default.createElement(s.code,{className:"language-tsx",lines:"1,9-20"},n.default.createElement(s.div,{"data-line":"1",className:"highlight-line","data-highlighted":"true"},n.default.createElement(s.span,{className:"token keyword module"},"import")," ",n.default.createElement(s.span,{className:"token imports"},n.default.createElement(s.span,{className:"token punctuation"},"{")," animated",n.default.createElement(s.span,{className:"token punctuation"},",")," useSpring",n.default.createElement(s.span,{className:"token punctuation"},",")," useIsomorphicLayoutEffect ",n.default.createElement(s.span,{className:"token punctuation"},"}"))," ",n.default.createElement(s.span,{className:"token keyword module"},"from")," ",n.default.createElement(s.span,{className:"token string"},"'@react-spring/web'"),`
`),n.default.createElement(s.div,{"data-line":"2",className:"highlight-line","data-highlighted":"false"},`
`),n.default.createElement(s.div,{"data-line":"3",className:"highlight-line","data-highlighted":"false"},n.default.createElement(s.span,{className:"token keyword"},"const")," ",n.default.createElement(s.span,{className:"token function-variable function"},n.default.createElement(s.span,{className:"token maybe-class-name"},"MyComponent"))," ",n.default.createElement(s.span,{className:"token operator"},"=")," ",n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},"{"),"position",n.default.createElement(s.span,{className:"token punctuation"},"}"),n.default.createElement(s.span,{className:"token punctuation"},")")," ",n.default.createElement(s.span,{className:"token arrow operator"},"=>")," ",n.default.createElement(s.span,{className:"token punctuation"},"{"),`
`),n.default.createElement(s.div,{"data-line":"4",className:"highlight-line","data-highlighted":"false"},"    ",n.default.createElement(s.span,{className:"token keyword"},"const")," ",n.default.createElement(s.span,{className:"token punctuation"},"["),"springs",n.default.createElement(s.span,{className:"token punctuation"},",")," api",n.default.createElement(s.span,{className:"token punctuation"},"]")," ",n.default.createElement(s.span,{className:"token operator"},"=")," ",n.default.createElement(s.span,{className:"token function"},"useSpring"),n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},")")," ",n.default.createElement(s.span,{className:"token arrow operator"},"=>")," ",n.default.createElement(s.span,{className:"token punctuation"},"{"),`
`),n.default.createElement(s.div,{"data-line":"5",className:"highlight-line","data-highlighted":"false"},"        y",n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token number"},"0"),n.default.createElement(s.span,{className:"token punctuation"},","),`
`),n.default.createElement(s.div,{"data-line":"6",className:"highlight-line","data-highlighted":"false"},"        x",n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token number"},"0"),n.default.createElement(s.span,{className:"token punctuation"},","),`
`),n.default.createElement(s.div,{"data-line":"7",className:"highlight-line","data-highlighted":"false"},"    ",n.default.createElement(s.span,{className:"token punctuation"},"}"),n.default.createElement(s.span,{className:"token punctuation"},",")," ",n.default.createElement(s.span,{className:"token punctuation"},"["),n.default.createElement(s.span,{className:"token punctuation"},"]"),n.default.createElement(s.span,{className:"token punctuation"},")"),`
`),n.default.createElement(s.div,{"data-line":"8",className:"highlight-line","data-highlighted":"false"},`
`),n.default.createElement(s.div,{"data-line":"9",className:"highlight-line","data-highlighted":"true"},"    ",n.default.createElement(s.span,{className:"token function"},"useIsomorphicLayoutEffect"),n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},")")," ",n.default.createElement(s.span,{className:"token arrow operator"},"=>")," ",n.default.createElement(s.span,{className:"token punctuation"},"{"),`
`),n.default.createElement(s.div,{"data-line":"10",className:"highlight-line","data-highlighted":"true"},"        api",n.default.createElement(s.span,{className:"token punctuation"},"."),n.default.createElement(s.span,{className:"token method function property-access"},"start"),n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},"{"),`
`),n.default.createElement(s.div,{"data-line":"11",className:"highlight-line","data-highlighted":"true"},"            ",n.default.createElement(s.span,{className:"token keyword module"},"from"),n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token punctuation"},"{"),`
`),n.default.createElement(s.div,{"data-line":"12",className:"highlight-line","data-highlighted":"true"},"                x",n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token number"},"0"),n.default.createElement(s.span,{className:"token punctuation"},","),`
`),n.default.createElement(s.div,{"data-line":"13",className:"highlight-line","data-highlighted":"true"},"                y",n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token number"},"0"),n.default.createElement(s.span,{className:"token punctuation"},","),`
`),n.default.createElement(s.div,{"data-line":"14",className:"highlight-line","data-highlighted":"true"},"            ",n.default.createElement(s.span,{className:"token punctuation"},"}"),n.default.createElement(s.span,{className:"token punctuation"},","),`
`),n.default.createElement(s.div,{"data-line":"15",className:"highlight-line","data-highlighted":"true"},"            to",n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token punctuation"},"{"),`
`),n.default.createElement(s.div,{"data-line":"16",className:"highlight-line","data-highlighted":"true"},"                x",n.default.createElement(s.span,{className:"token operator"},":")," position",n.default.createElement(s.span,{className:"token punctuation"},"."),n.default.createElement(s.span,{className:"token property-access"},"x"),n.default.createElement(s.span,{className:"token punctuation"},","),`
`),n.default.createElement(s.div,{"data-line":"17",className:"highlight-line","data-highlighted":"true"},"                y",n.default.createElement(s.span,{className:"token operator"},":")," position",n.default.createElement(s.span,{className:"token punctuation"},"."),n.default.createElement(s.span,{className:"token property-access"},"y"),n.default.createElement(s.span,{className:"token punctuation"},","),`
`),n.default.createElement(s.div,{"data-line":"18",className:"highlight-line","data-highlighted":"true"},"            ",n.default.createElement(s.span,{className:"token punctuation"},"}"),`
`),n.default.createElement(s.div,{"data-line":"19",className:"highlight-line","data-highlighted":"true"},"        ",n.default.createElement(s.span,{className:"token punctuation"},"}"),n.default.createElement(s.span,{className:"token punctuation"},")"),`
`),n.default.createElement(s.div,{"data-line":"20",className:"highlight-line","data-highlighted":"true"},"    ",n.default.createElement(s.span,{className:"token punctuation"},"}"),n.default.createElement(s.span,{className:"token punctuation"},","),n.default.createElement(s.span,{className:"token punctuation"},"["),"position",n.default.createElement(s.span,{className:"token punctuation"},"]"),n.default.createElement(s.span,{className:"token punctuation"},")"),`
`),n.default.createElement(s.div,{"data-line":"21",className:"highlight-line","data-highlighted":"false"},`
`),n.default.createElement(s.div,{"data-line":"22",className:"highlight-line","data-highlighted":"false"},"    ",n.default.createElement(s.span,{className:"token keyword control-flow"},"return")," ",n.default.createElement(s.span,{className:"token tag"},n.default.createElement(s.span,{className:"token tag"},n.default.createElement(s.span,{className:"token punctuation"},"<"),"animated.div")," ",n.default.createElement(s.span,{className:"token attr-name"},"style"),n.default.createElement(s.span,{className:"token script language-javascript"},n.default.createElement(s.span,{className:"token script-punctuation punctuation"},"="),n.default.createElement(s.span,{className:"token punctuation"},"{"),"springs",n.default.createElement(s.span,{className:"token punctuation"},"}"))," ",n.default.createElement(s.span,{className:"token punctuation"},"/>")),`
`),n.default.createElement(s.div,{"data-line":"23",className:"highlight-line","data-highlighted":"false"},n.default.createElement(s.span,{className:"token punctuation"},"}"),`
`))),`
`,n.default.createElement(s.h2,{id:"why-do-we-need-this"},n.default.createElement(s.a,{href:"#why-do-we-need-this"},"Why do we need this?")),`
`,n.default.createElement(s.p,null,`When we want to perform side-effects caused by rendering a component we need to
use `,n.default.createElement(s.a,{href:"https://reactjs.org/docs/hooks-reference.html#useeffect"},n.default.createElement(s.code,null,"useEffect"))," or ",n.default.createElement(s.a,{href:"https://reactjs.org/docs/hooks-reference.html#uselayouteffect"},n.default.createElement(s.code,null,"useLayoutEffect")),`.
Now, the latter, `,n.default.createElement(s.code,null,"useLayoutEffect"),` in our opinion, is better for animations because it renders
"before the browser has a chance to paint", therefore if you want to prepare a node e.g. a div
for animation before actually animating it, it's probably better to ensure no paint happens, otherwise
you might get a sort of UI tear where the item suddenly jumps to a new position.`),`
`,n.default.createElement(s.p,null,"Neither of the above effect hooks run on the server, however, ",n.default.createElement(s.code,null,"useLayoutEffect"),` causes react warnings
when server-side rendering your pages (if you're using nextjs for example). So it encourages you
to move the code to `,n.default.createElement(s.code,null,"useEffect"),". However, as we described above this isn't best for animations."),`
`,n.default.createElement(s.h2,{id:"what-does-it-do"},n.default.createElement(s.a,{href:"#what-does-it-do"},"What does it do?")),`
`,n.default.createElement(s.p,null,"This is where our ",n.default.createElement(s.code,null,"useIsomorphicLayoutEffect"),` utility hook comes in. By performing a simple (yet robust) check,
the hook correctly returns `,n.default.createElement(s.code,null,"useEffect")," for server-side environments and ",n.default.createElement(s.code,null,"useLayoutEffect"),` for client-side
environments, thus the best of both worlds in this case.`),`
`,n.default.createElement(s.h2,{id:"typescript"},n.default.createElement(s.a,{href:"#typescript"},"Typescript")),`
`,n.default.createElement(s.p,null,"The type signature will be identical to the signatures of ",n.default.createElement(s.code,null,"useEffect")," and ",n.default.createElement(s.code,null,"useLayoutEffect"),` installed in
your project, but just to save you time, it's here below:`),`
`,n.default.createElement(s.pre,null,n.default.createElement(s.code,{className:"language-ts"},n.default.createElement(s.div,{"data-line":"1",className:"highlight-line","data-highlighted":"true"},n.default.createElement(s.span,{className:"token keyword"},"function")," ",n.default.createElement(s.span,{className:"token function"},"useIsomorphicLayoutEffect"),n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token function-variable function"},"effect"),n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},")")," ",n.default.createElement(s.span,{className:"token arrow operator"},"=>")," ",n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token keyword"},"void")," ",n.default.createElement(s.span,{className:"token operator"},"|")," ",n.default.createElement(s.span,{className:"token punctuation"},"("),n.default.createElement(s.span,{className:"token punctuation"},")")," ",n.default.createElement(s.span,{className:"token arrow operator"},"=>")," ",n.default.createElement(s.span,{className:"token keyword"},"void"),n.default.createElement(s.span,{className:"token punctuation"},")"),n.default.createElement(s.span,{className:"token punctuation"},",")," deps",n.default.createElement(s.span,{className:"token operator"},"?"),n.default.createElement(s.span,{className:"token operator"},":")," ",n.default.createElement(s.span,{className:"token maybe-class-name"},"ReadonlyArray"),n.default.createElement(s.span,{className:"token operator"},"<"),n.default.createElement(s.span,{className:"token builtin"},"unknown"),n.default.createElement(s.span,{className:"token operator"},">"),n.default.createElement(s.span,{className:"token punctuation"},")"),`
`))));return a?n.default.createElement(a,{...e},t):t}var l=c;var d=typeof o<"u"&&o.headers,u=typeof o<"u"&&o.meta,r=typeof o<"u"&&o.handle;export{l as default,r as handle,u as meta};
